{"version":3,"file":"js-sdk.js","sources":["../src/shared/user-agent.ts","../src/shared/is-android.ts","../src/shared/global.ts","../src/shared/api-name.ts","../src/shared/is-web.ts","../src/bridges/invoke.ts","../src/bridges/eventbus.ts","../src/bridges/index.ts","../src/init.ts","../src/apis/miniprogram/gen-env.ts","../src/apis/miniprogram/navigate-back.ts","../src/apis/utils.ts","../src/apis/miniprogram/navigate-to.ts","../src/apis/miniprogram/redirect-to.ts","../src/apis/miniprogram/switch-tab.ts","../src/apis/miniprogram/re-launch.ts","../src/apis/miniprogram/post-message.ts","../src/apis/miniprogram/close.ts","../src/apis/native/choose-image.ts","../src/apis/native/get-location.ts","../src/apis/native/preview-image.ts","../src/apis/native/open-document.ts","../src/apis/native/get-storage.ts","../src/apis/native/set-storage.ts","../src/apis/native/remove-storage.ts","../src/apis/native/clear-storage.ts","../src/apis/native/get-network-type.ts","../src/apis/native/scan-code.ts","../src/apis/native/get-local-img-data.ts","../src/apis/native/call-native-api.ts","../src/apis/native/native.ts","../src/apis/index.ts","../src/index.ts"],"sourcesContent":["export const userAgent: string =\n  window?.navigator?.userAgent?.toLocaleLowerCase();\n","import { userAgent } from './user-agent';\n\nexport const isAndroid: boolean = userAgent?.indexOf('android') !== -1;\n","import { TabBar } from 'src/types';\n\n// 全局作用域扩展 Window 声明\ndeclare global {\n  interface Window {\n    [MA_GLOBAL_KEY]: typeof globalConfig;\n    simulatorWebkit: any;\n    __simulatorConfig__: any;\n  }\n}\n\nexport const CURRENT_ROUTE = Symbol(`currentRoute`);\nexport const IS_INITD = Symbol(`isInitd`);\nexport const TABBAR = Symbol(`tabBar`);\nexport const CAN_NAVIGATE_TO = Symbol(`canNavigateTo`);\n\n// 为了调试方便, 这里使用字符串常量 而不是 symbol 变量\n// TODO: 后期增加 __DEV__ 能力之后, 生产态使用 Symbol\nconst MA_GLOBAL_KEY = `__ma__global__`;\n\ntype GLOBAL_CONFIG_VAL = string | boolean | TabBar | null;\n\nconst globalConfig: Record<symbol, GLOBAL_CONFIG_VAL> = {\n  [CURRENT_ROUTE]: ``,\n  [IS_INITD]: false,\n  [TABBAR]: null,\n  [CAN_NAVIGATE_TO]: true\n};\n\n/**\n * 将变量和值挂到 window 上方便共享\n * 统一挂到 window.__ma__global__对象下, 相同的 key 会被覆盖\n */\nwindow[MA_GLOBAL_KEY] = globalConfig;\n\nexport function makeGlobal(key: symbol, val: GLOBAL_CONFIG_VAL): void {\n  globalConfig[key] = val;\n}\n\nexport function getGlobal(key: symbol): GLOBAL_CONFIG_VAL {\n  return window[MA_GLOBAL_KEY][key];\n}\n","const MiniProgram = {\n  NAVIGATE_TO: 'navigateTo',\n  NAVIGATE_BACK: 'navigateBack',\n  REDIRECT_TO: 'redirectTo',\n  SWITCH_TAB: 'switchTab',\n  RE_LAUNCH: 'reLaunch',\n  POST_MESSAGE: 'postMessage',\n  CLOSE: 'close'\n};\n\nconst Native = {\n  CHOOSE_IMAGE: 'chooseImage',\n  GET_LOCAL_IMG_DATA: 'getLocalImgData',\n  GET_LOCATION: 'getLocation',\n  PREVIEW_IMAGE: 'previewImage',\n  OPEN_DOCUMENT: 'openDocument',\n  GET_STORAGE: 'getStorage',\n  SET_STORAGE: 'setStorage',\n  REMOVE_STORAGE: 'removeStorage',\n  CLEAR_STORAGE: 'clearStorage',\n  GET_NETWORK_TYPE: 'getNetworkType',\n  SCAN_CODE: 'scanCode'\n};\n\nexport const APINames = {\n  MiniProgram,\n  Native\n};\n","export const isWeb: boolean = window.parent.__simulatorConfig__ !== undefined;\n","import { isAndroid, isWeb } from 'src/shared';\nimport {\n  GeneralCallbackResult,\n  GeneralCallback,\n  GeneralInvokeOption,\n  IAnyStrObject,\n  InvokeFinishedCallback\n} from 'src/types';\n\nexport type IAnyNumObject = Record<number, any>;\n\nexport interface InvokeOption extends GeneralInvokeOption {}\n\nexport interface InvokeInnerFnsOption {\n  beforeAll: GeneralCallback;\n  beforeSuccess: GeneralCallback;\n  afterSuccess: GeneralCallback;\n  beforeFail: GeneralCallback;\n  afterFail: GeneralCallback;\n  afterAll: GeneralCallback;\n}\n\n// invoke callbacks\nconst callbacks: IAnyNumObject = {};\nlet callbackIndex: number = 0;\n\nfunction invokeHandler(\n  command: string,\n  inputParams: string,\n  callbackId: number\n) {\n  if (isWeb) {\n    window.simulatorWebkit.messageHandlers.invoke.postMessage({\n      command,\n      inputParams,\n      callbackId,\n      type: 'legacy'\n    });\n  } else if (isAndroid) {\n    window.viewLayerNative.invoke(command, inputParams, callbackId);\n  } else {\n    window.webkit.messageHandlers.invoke.postMessage({\n      command,\n      inputParams,\n      callbackId\n    });\n  }\n}\n\nexport function invoke(\n  command: string,\n  inputParams: IAnyStrObject = {},\n  callback: InvokeFinishedCallback\n) {\n  const paramsString = JSON.stringify(inputParams);\n  const callbackId = ++callbackIndex;\n  callbacks[callbackId] = callback;\n  invokeHandler(command, paramsString, callbackId);\n}\n\n/**\n * 统一封装调用逻辑, 通知 Native, 调用 API\n */\nexport function invokeMethod(\n  apiName: string,\n  opts?: Partial<InvokeOption & IAnyStrObject>,\n  innerCb: Partial<InvokeInnerFnsOption> = {}\n) {\n  const invokeCbFnsObj: Record<string, GeneralCallback> = {};\n\n  for (const name in opts) {\n    if (typeof opts[name] === 'function') {\n      invokeCbFnsObj[name] = opts[name];\n      delete opts[name];\n    }\n  }\n\n  invoke(apiName, opts, (invokeStatusCode, res) => {\n    const isOk = Number(invokeStatusCode) === 0;\n    const isFail = !isOk;\n\n    if (isOk) {\n      innerCb?.beforeAll?.(res);\n      innerCb?.beforeSuccess?.(res);\n      invokeCbFnsObj.success?.(res);\n      innerCb?.afterSuccess?.(res);\n    }\n\n    if (isFail) {\n      innerCb?.beforeFail?.(res);\n      invokeCbFnsObj.fail?.(res);\n      innerCb?.afterFail?.(res);\n    }\n\n    invokeCbFnsObj.complete?.(res);\n    innerCb?.afterAll?.(res);\n  });\n}\n\n/**\n * Native notify Web Page invoke result\n *\n * => viewLayer.onInvokeFinished\n */\nexport function onInvokeFinished(\n  callbackId: number,\n  invokeStatusCode: number,\n  outputParams: GeneralCallbackResult\n) {\n  const callback = callbacks[callbackId];\n  callback(invokeStatusCode, outputParams);\n  delete callbacks[callbackId];\n}\n\nconst MacleJSBridge = {\n  invoke,\n  invokeMethod\n};\n\nexport default MacleJSBridge;\n","import { isAndroid, isWeb } from 'src/shared';\nimport { IAnyStrObject, IFunStrObject } from 'src/types';\n\n// subscribe handlers\nconst handlers: IFunStrObject = {};\nconst eventPrefix = 'ma_custom_event_';\n\n/**\n * subscribe web event(user)\n */\nexport function webSubscribe(eventName: string, handler: Function) {\n  handlers[eventName] = handler;\n}\n\n/**\n * subscribe custom event\n */\nexport function subscribe(eventName: string, handler: Function) {\n  handlers[`${eventPrefix}${eventName}`] = handler;\n}\n\n/**\n * trigger event handler\n */\nexport function subscribeHandler(eventName: string, data: IAnyStrObject) {\n  const handler = handlers[eventName];\n  return handler(data);\n}\n\nexport function publish(eventName: string, params: IAnyStrObject = {}) {\n  const paramsString = JSON.stringify(params);\n  publishHandler(`${eventPrefix}${eventName}`, paramsString);\n}\n\nexport function webPublish(eventName: string, params: IAnyStrObject = {}) {\n  const paramsString = JSON.stringify(params);\n  publishHandler(eventName, paramsString);\n}\n\n/**\n * 通知 Native, 处理业务事件\n */\nfunction publishHandler(eventName: string, paramsString: string) {\n  if (isWeb) {\n    window.simulatorWebkit.messageHandlers.notifyNative.postMessage({\n      eventName,\n      paramsString,\n      type: 'legacy'\n    });\n  } else if (isAndroid) {\n    window.viewLayerNative.notifyNative(eventName, paramsString);\n  } else {\n    window.webkit.messageHandlers.notifyNative.postMessage({\n      eventName,\n      paramsString\n    });\n  }\n}\n","import { invoke, invokeMethod } from './invoke';\nimport { subscribe, webSubscribe, publish, webPublish } from './eventbus';\n\nconst MacleJSBridge = {\n  invoke,\n  invokeMethod,\n  subscribe,\n  webSubscribe,\n  publish,\n  webPublish\n};\n\nexport default MacleJSBridge;\n\nexport * from './invoke';\nexport * from './eventbus';\n","import {\n  CAN_NAVIGATE_TO,\n  CURRENT_ROUTE,\n  CUSTOM_EVENT,\n  getGlobal,\n  IS_INITD,\n  makeGlobal,\n  TABBAR\n} from 'src/shared';\nimport { subscribe, publish } from './bridges';\nimport { IAnyStrObject } from 'src/types';\n\nexport function init() {\n  // already initd\n  if (getGlobal(IS_INITD) as boolean) {\n    return;\n  }\n\n  makeGlobal(IS_INITD, true);\n\n  try {\n    subscribe(CUSTOM_EVENT.GET_CURRENT_ROUTE, (data: IAnyStrObject) => {\n      makeGlobal(CURRENT_ROUTE, data.route);\n      makeGlobal(TABBAR, data.tabBar);\n      makeGlobal(\n        CAN_NAVIGATE_TO,\n        data.canNavigateTo !== undefined ? data.canNavigateTo : true\n      );\n    });\n\n    publish(CUSTOM_EVENT.GET_CURRENT_ROUTE);\n  } catch (error) {}\n}\n","type GetEnvCallback = (ret: { miniprogram: boolean }) => void;\n\nexport function getEnv(callback: GetEnvCallback): void {\n  const miniprogram = window.__ma_environment === 'miniprogram';\n  callback({\n    miniprogram\n  });\n}\n","import { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\nimport MacleJSBridge from 'src/bridges';\n\nexport interface NavigateBackOption extends Partial<GeneralInvokeOption> {\n  delta: number;\n}\n\n/**\n * ```js\n *   ma.miniProgram.navigateTo({\n *     delta: 1,\n *     success: function(res) {},\n *     fail: function(res) {},\n *     complete: function(res) {},\n *   })\n * ```\n */\nexport function navigateBack(option: NavigateBackOption): void {\n  const fixedOption = Object.assign({ delta: 1 }, option);\n  MacleJSBridge.invokeMethod(APINames.MiniProgram.NAVIGATE_BACK, fixedOption);\n}\n","import { APINames, getGlobal, TABBAR } from 'src/shared';\nimport { IAnyStrObject, TabBar } from 'src/types';\nimport {\n  NavigateToOption,\n  RedirectToOption,\n  SwitchTabOption,\n  ReLaunchOption\n} from './miniprogram';\n\n/**\n * fix route\n * @param currentRoute 当前路由\n * @param toUrl 目标 url\n */\nexport function getRealRoute(\n  currentRoute: string,\n  toUrl: string,\n  isHtml: boolean = true\n): string {\n  let fixedUrl = toUrl;\n\n  if (isHtml) {\n    fixedUrl = addHTMLSuffix(fixedUrl);\n  }\n\n  if (fixedUrl.startsWith('/')) {\n    return fixedUrl.substr('/'.length);\n  }\n\n  if (fixedUrl.startsWith('./')) {\n    return getRealRoute(currentRoute, fixedUrl.substr('./'.length), false);\n  }\n\n  // 移除 url 前面的 ../ 并记录其位置\n  let index;\n  let urlArrLength;\n  const urlArr = fixedUrl.split('/');\n  for (\n    index = 0, urlArrLength = urlArr.length;\n    index < urlArrLength && urlArr[index] === '..';\n    index++\n  );\n  urlArr.splice(0, index);\n  const pathArr = currentRoute.length > 0 ? currentRoute.split('/') : [];\n  pathArr.splice(pathArr.length - index - 1, index + 1);\n  return pathArr.concat(urlArr).join('/');\n}\n\nexport function encodeUrlQuery(url: string): string {\n  const urlArr = url.split('?');\n  const [urlPath, queryUrl] = urlArr;\n  if (!queryUrl) {\n    return url;\n  }\n  const queryParams = queryUrl.split('&').reduce((res: IAnyStrObject, cur) => {\n    if (typeof cur === 'string' && cur.length > 0) {\n      const curArr = cur.split('=');\n      const key = curArr[0];\n      const value = curArr[1];\n      res[key] = value;\n    }\n    return res;\n  }, Object.create(null));\n  const urlQueryArr = [];\n  for (const i in queryParams) {\n    urlQueryArr.push(i + '=' + encodeURIComponent(queryParams[i]));\n  }\n  return urlQueryArr.length > 0 ? urlPath + '?' + urlQueryArr.join('&') : url;\n}\n\nexport function addHTMLSuffix(url: string): string {\n  const urlArr = url.split('?');\n  urlArr[0] += '.html';\n  return urlArr[1] === undefined ? urlArr[0] : `${urlArr[0]}?${urlArr[1]}`;\n}\n\nexport function checkUrl(\n  apiName: string,\n  options:\n    | NavigateToOption\n    | RedirectToOption\n    | SwitchTabOption\n    | ReLaunchOption\n): boolean {\n  const tabBar = getGlobal(TABBAR) as TabBar | null;\n  if (tabBar === null) {\n    return true;\n  }\n\n  if (options.url.startsWith('/')) {\n    options.url = options.url.slice('/'.length);\n  }\n\n  // 目标 url 是否在 tabbar 中\n  const inTabBar = ((url: string) =>\n    tabBar?.list.find(e => url.indexOf(e.pagePath) === 0))(options.url);\n\n  // navigateTo 和 redirectTo API 禁止跳转到 tabbar 页面\n  if (\n    apiName === APINames.MiniProgram.NAVIGATE_TO ||\n    apiName === APINames.MiniProgram.REDIRECT_TO\n  ) {\n    if (inTabBar) {\n      console.error(\n        apiName,\n        options,\n        `${apiName}: can not ${apiName} to a tabbar page`\n      );\n      return false;\n    }\n  }\n\n  // switchTab 禁止跳转到非 tabbar 页面\n  if (apiName === APINames.MiniProgram.SWITCH_TAB) {\n    if (!inTabBar) {\n      console.error(\n        apiName,\n        options,\n        `${apiName}: can not ${apiName} to a non-tabbar page`\n      );\n      return false;\n    }\n  }\n  return true;\n}\n","import { APINames, CURRENT_ROUTE, getGlobal } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\nimport { getRealRoute, encodeUrlQuery, checkUrl } from '../utils';\nimport MacleJSBridge from 'src/bridges';\n\nexport interface NavigateToOption extends Partial<GeneralInvokeOption> {\n  url: string;\n}\n\n/**\n * ```js\n *   ma.miniProgram.navigateTo({\n *     url: 'example?id=1',\n *     success: function(res) {},\n *     fail: function(res) {},\n *     complete: function(res) {},\n *   })\n * ```\n */\nexport function navigateTo(option: NavigateToOption): void {\n  if (!option.url) {\n    console.error(\n      'navigateTo fail,parameter error:parameter.url should be String instead of Undefined.'\n    );\n    return;\n  }\n  const fixedOption = option;\n  fixedOption.url = getRealRoute(\n    getGlobal(CURRENT_ROUTE) as string,\n    fixedOption.url\n  );\n  fixedOption.url = encodeUrlQuery(fixedOption.url);\n\n  if (checkUrl(APINames.MiniProgram.NAVIGATE_TO, fixedOption)) {\n    MacleJSBridge.invokeMethod(APINames.MiniProgram.NAVIGATE_TO, fixedOption);\n  }\n}\n","import { GeneralInvokeOption } from 'src/types';\nimport { getRealRoute, encodeUrlQuery, checkUrl } from '../utils';\nimport MacleJSBridge from 'src/bridges';\nimport { APINames, CURRENT_ROUTE, getGlobal } from 'src/shared';\n\nexport interface RedirectToOption extends Partial<GeneralInvokeOption> {\n  url: string;\n}\n\n/**\n * ```js\n *   ma.miniProgram.redirectTo({\n *     url: 'example?id=1',\n *     success: function(res) {},\n *     fail: function(res) {},\n *     complete: function(res) {},\n *   })\n * ```\n */\nexport function redirectTo(option: RedirectToOption): void {\n  if (!option.url) {\n    console.error(\n      'redirectTo fail,parameter error:parameter.url should be String instead of Undefined.'\n    );\n    return;\n  }\n  const fixedOption = option;\n  fixedOption.url = getRealRoute(\n    getGlobal(CURRENT_ROUTE) as string,\n    fixedOption.url\n  );\n  fixedOption.url = encodeUrlQuery(fixedOption.url);\n\n  if (checkUrl(APINames.MiniProgram.REDIRECT_TO, fixedOption)) {\n    MacleJSBridge.invokeMethod(APINames.MiniProgram.REDIRECT_TO, fixedOption);\n  }\n}\n","import { GeneralInvokeOption } from 'src/types';\nimport { getRealRoute, encodeUrlQuery, checkUrl } from '../utils';\nimport MacleJSBridge from 'src/bridges';\nimport { APINames, CURRENT_ROUTE, getGlobal } from 'src/shared';\n\nexport interface SwitchTabOption extends Partial<GeneralInvokeOption> {\n  url: string;\n}\n\n/**\n * ```js\n *   ma.miniProgram.switchTab({\n *     url: '/example',\n *     success: function(res) {},\n *     fail: function(res) {},\n *     complete: function(res) {},\n *   })\n * ```\n */\nexport function switchTab(option: SwitchTabOption): void {\n  if (!option.url) {\n    console.error(\n      'switchTab fail,parameter error:parameter.url should be String instead of Undefined.'\n    );\n    return;\n  }\n  const fixedOption = option;\n  fixedOption.url = getRealRoute(\n    getGlobal(CURRENT_ROUTE) as string,\n    fixedOption.url\n  );\n  fixedOption.url = encodeUrlQuery(fixedOption.url);\n\n  if (checkUrl(APINames.MiniProgram.SWITCH_TAB, fixedOption)) {\n    MacleJSBridge.invokeMethod(APINames.MiniProgram.SWITCH_TAB, fixedOption);\n  }\n}\n","import { GeneralInvokeOption } from 'src/types';\nimport { getRealRoute, encodeUrlQuery, checkUrl } from '../utils';\nimport MacleJSBridge from 'src/bridges';\nimport { APINames, CURRENT_ROUTE, getGlobal } from 'src/shared';\n\nexport interface ReLaunchOption extends Partial<GeneralInvokeOption> {\n  url: string;\n}\n\n/**\n * ```js\n *   ma.miniProgram.reLaunch({\n *     url: '/example',\n *     success: function(res) {},\n *     fail: function(res) {},\n *     complete: function(res) {},\n *   })\n * ```\n */\nexport function reLaunch(option: ReLaunchOption): void {\n  if (!option.url) {\n    console.error(\n      'reLaunch fail,parameter error:parameter.url should be String instead of Undefined.'\n    );\n    return;\n  }\n  const fixedOption = option;\n  fixedOption.url = getRealRoute(\n    getGlobal(CURRENT_ROUTE) as string,\n    fixedOption.url\n  );\n  fixedOption.url = encodeUrlQuery(fixedOption.url);\n\n  if (checkUrl(APINames.MiniProgram.RE_LAUNCH, fixedOption)) {\n    MacleJSBridge.invokeMethod(APINames.MiniProgram.RE_LAUNCH, fixedOption);\n  }\n}\n","import { APINames } from 'src/shared';\nimport { GeneralInvokeOption, IAnyStrObject } from 'src/types';\nimport MacleJSBridge from 'src/bridges';\n\nexport interface PostMessageOption extends Partial<GeneralInvokeOption> {\n  data: string | IAnyStrObject;\n}\n\n/**\n * 向小程序发送消息，会在特定时机（小程序后退、组件销毁）触发组件的 message 事件\n * 需要通过 bindmessage 接收\n *\n * ```js\n *   ma.miniProgram.postMessage({\n *     data: 'foo' | { foo: 'bar' },\n *     success: function(res) {},\n *     fail: function(res) {},\n *     complete: function(res) {},\n *   })\n * ```\n */\nexport function postMessage(option: PostMessageOption) {\n  MacleJSBridge.invokeMethod(APINames.MiniProgram.POST_MESSAGE, option);\n}\n","import { APINames } from 'src/shared';\nimport MacleJSBridge from 'src/bridges';\n\n/**\n * 关闭小程序\n *\n * ```js\n *   ma.miniProgram.close()\n * ```\n */\nexport function close() {\n  MacleJSBridge.invokeMethod(APINames.MiniProgram.CLOSE);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\nexport interface ChooseImageOption extends Partial<GeneralInvokeOption> {\n  count: number;\n  sizeType: Array<String>;\n  sourceType: Array<String>;\n}\n\n// 拍照或上传\nexport function chooseImage(option?: ChooseImageOption) {\n  const fixedOption = Object.assign(\n    {\n      count: 9,\n      sizeType: ['original', 'compressed'],\n      sourceType: ['album', 'camera']\n    },\n    option\n  );\n  MacleJSBridge.invokeMethod(APINames.Native.CHOOSE_IMAGE, fixedOption);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\n/**\n * ```js\n *   ma.getLocation({\n *     success(res) {},\n *     fail(res) {},\n *     complete(res) {},\n *   })\n * ```\n */\n\n// 获取当前地理位置信息\nexport function getLocation(option?: GeneralInvokeOption) {\n  MacleJSBridge.invokeMethod(APINames.Native.GET_LOCATION, option);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\nexport interface PreviewImageOption extends Partial<GeneralInvokeOption> {\n  urls: Array<string>;\n  current: string;\n}\n\n/**\n * js\n * ma.previewImage({\n  urls: [],\n  current: '',\n  success() {},\n  fail() {},\n  complete() {}\n});\n*/\n\n// 预览图片\nexport function previewImage(option?: PreviewImageOption) {\n  if (!option?.urls) {\n    console.error(\n      'previewImage fail,parameter error:parameter.urls should be Array instead of Undefined.'\n    );\n    return;\n  }\n  MacleJSBridge.invokeMethod(APINames.Native.PREVIEW_IMAGE, option);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\nexport interface OpenDocumentOption extends Partial<GeneralInvokeOption> {\n  filePath: string;\n  fileType: string;\n}\n\n// 打开文件，预览文件\nexport function openDocument(option?: OpenDocumentOption) {\n  if (!option?.filePath) {\n    console.error(\n      'openDocument fail,parameter error:parameters.filePath should be String instead of Undefined.'\n    );\n    return;\n  }\n  const validFileType: Array<string> = [\n    'doc',\n    'docx',\n    'xls',\n    'xlsx',\n    'ppt',\n    'pptx',\n    'pdf'\n  ];\n  if (option.fileType && validFileType.indexOf(option.fileType) === -1) {\n    console.error(\n      'openDocument fail,parameter error:parameter.fileType is invalid value.'\n    );\n    return;\n  }\n  MacleJSBridge.invokeMethod(APINames.Native.OPEN_DOCUMENT, option);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\nexport interface GetStorageOption extends Partial<GeneralInvokeOption> {\n  key: string;\n}\n\n// 从本地缓存中获取指定key的内容\nexport function getStorage(option?: GetStorageOption) {\n  if (!option?.key) {\n    console.error(\n      'getStorage fail,parameter error:parameters.key should be String instead of Undefined.'\n    );\n    return;\n  }\n  MacleJSBridge.invokeMethod(APINames.Native.GET_STORAGE, option);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\nexport interface SetStorageOption extends Partial<GeneralInvokeOption> {\n  key: string;\n  data: any;\n}\n\n// 将数据存储在本地缓存指定key中\nexport function setStorage(option?: SetStorageOption) {\n  if (!option?.key || !option.data) {\n    console.error(\n      'setStorage fail,parameter error:parameter.key or parameter.data should not be Undefined.'\n    );\n    return;\n  }\n  MacleJSBridge.invokeMethod(APINames.Native.SET_STORAGE, option);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\nexport interface RemoveStorageOption extends Partial<GeneralInvokeOption> {\n  key: string;\n}\n\n// 从本地缓存中移除指定key\nexport function removeStorage(option?: RemoveStorageOption) {\n  if (!option?.key) {\n    console.error(\n      'removeStorage fail,parameter error:parameter.key should be String instead of Undefined.'\n    );\n    return;\n  }\n  MacleJSBridge.invokeMethod(APINames.Native.REMOVE_STORAGE, option);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\n// 清理本地数据缓存\nexport function clearStorage(option?: GeneralInvokeOption) {\n  MacleJSBridge.invokeMethod(APINames.Native.CLEAR_STORAGE, option);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\n// 获取网络类型\nexport function getNetworkType(option?: GeneralInvokeOption) {\n  MacleJSBridge.invokeMethod(APINames.Native.GET_NETWORK_TYPE, option);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\nexport interface ScanCodeOption extends Partial<GeneralInvokeOption> {\n  onlyFromCamera: boolean;\n  scanType: Array<string>;\n}\n\n// 扫描二维码\nexport function scanCode(option?: ScanCodeOption) {\n  // 校验scanType合法性\n  const validScanType: Array<string> = [\n    'barCode',\n    'qrCode',\n    'datamatrix',\n    'pdf417'\n  ];\n  if (option?.scanType && option.scanType.length > 0) {\n    if (!option.scanType.every(item => validScanType.indexOf(item) > -1)) {\n      console.error(\n        'scanCode fail,parameter error:parameter.scanType contains invalid values.'\n      );\n      return;\n    }\n  }\n  const fixedOption = Object.assign(\n    {\n      onlyFromCamera: false,\n      scanType: ['barCode', 'qrCode']\n    },\n    option\n  );\n  MacleJSBridge.invokeMethod(APINames.Native.SCAN_CODE, fixedOption);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\nexport interface GetLocalImgDataOption extends Partial<GeneralInvokeOption> {\n  path: string;\n}\n\n// 获取本地base64图片\nexport function getLocalImgData(option?: GetLocalImgDataOption) {\n  if (!option?.path) {\n    console.error(\n      'getLocalImgData fail,parameter error:parameter.path should be String instead of Undefined.'\n    );\n    return;\n  }\n  MacleJSBridge.invokeMethod(APINames.Native.GET_LOCAL_IMG_DATA, option);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { IAnyStrObject } from 'src/types';\n\nexport type NativeCallback = (res: any) => any;\n\n// h5调用native原生方法\nexport function callNativeAPI(\n  apiName: string,\n  inputParams: IAnyStrObject = {},\n  callback: NativeCallback\n) {\n  if (!callback || typeof callback !== 'function') {\n    console.error('callNativeAPI failed, callback should be function!');\n    return;\n  }\n  MacleJSBridge.invoke(apiName, inputParams, (invokeStatusCode, res) => {\n    const isOk = Number(invokeStatusCode) === 0;\n    if (!isOk) {\n      console.error(`callNativeAPI failed, ${res.errMsg}`);\n      return;\n    }\n    callback(res);\n  });\n}\n","import { callNativeAPI } from './call-native-api';\nimport { IAnyStrObject } from 'src/types';\nexport function native(method: string, param?: IAnyStrObject) {\n  const finalParam = param || {};\n  return new Promise(resolve => {\n    callNativeAPI(method, finalParam, res => {\n      resolve(res);\n    });\n  });\n}\n","import {\n  getEnv,\n  navigateBack,\n  navigateTo,\n  redirectTo,\n  switchTab,\n  reLaunch,\n  postMessage,\n  close\n} from './miniprogram';\n\nimport {\n  chooseImage,\n  getLocation,\n  previewImage,\n  openDocument,\n  getStorage,\n  setStorage,\n  removeStorage,\n  clearStorage,\n  getNetworkType,\n  scanCode,\n  getLocalImgData,\n  callNativeAPI,\n  native\n} from './native';\n\nconst APIS = {\n  // miniapp\n  miniProgram: {\n    getEnv,\n    navigateTo,\n    navigateBack,\n    switchTab,\n    reLaunch,\n    redirectTo,\n    postMessage,\n    close,\n    navigateToMiniProgram() {},\n    navigateBackMiniProgram() {},\n    onWebviewEvent() {},\n    offWebviewEvent() {},\n    sendWebviewEvent() {},\n    onShow() {},\n    onHide() {},\n    onUnload() {}\n  },\n\n  // H5 invoke Native\n  chooseImage,\n  getLocation,\n  previewImage,\n  openDocument,\n  getStorage,\n  setStorage,\n  removeStorage,\n  clearStorage,\n  getNetworkType,\n  scanCode,\n  getLocalImgData,\n  callNativeAPI,\n  native\n};\n\nexport default APIS;\n","import { init } from './init';\nimport { onInvokeFinished } from './bridges';\nimport { subscribeHandler } from './bridges';\nimport APIS from './apis';\n\n// 执行初始化逻辑\ndocument.readyState !== 'loading'\n  ? init()\n  : document.addEventListener('DOMContentLoaded', init);\n\n/**\n * Support use ma.api from window\n */\nwindow.ma = APIS;\n\nwindow.viewLayer = {\n  onInvokeFinished,\n  subscribeHandler\n};\n\nexport default APIS;\n"],"names":[],"mappings":"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"}