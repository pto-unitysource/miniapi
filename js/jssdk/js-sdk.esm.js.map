{"version":3,"file":"js-sdk.esm.js","sources":["../src/shared/user-agent.ts","../src/shared/is-android.ts","../src/shared/global.ts","../src/shared/api-name.ts","../src/shared/is-web.ts","../src/bridges/invoke.ts","../src/bridges/eventbus.ts","../src/bridges/index.ts","../src/init.ts","../src/apis/miniprogram/gen-env.ts","../src/apis/miniprogram/navigate-back.ts","../src/apis/utils.ts","../src/apis/miniprogram/navigate-to.ts","../src/apis/miniprogram/redirect-to.ts","../src/apis/miniprogram/switch-tab.ts","../src/apis/miniprogram/re-launch.ts","../src/apis/miniprogram/post-message.ts","../src/apis/miniprogram/close.ts","../src/apis/native/choose-image.ts","../src/apis/native/get-location.ts","../src/apis/native/preview-image.ts","../src/apis/native/open-document.ts","../src/apis/native/get-storage.ts","../src/apis/native/set-storage.ts","../src/apis/native/remove-storage.ts","../src/apis/native/clear-storage.ts","../src/apis/native/get-network-type.ts","../src/apis/native/scan-code.ts","../src/apis/native/get-local-img-data.ts","../src/apis/native/call-native-api.ts","../src/apis/native/native.ts","../src/apis/index.ts","../src/index.ts"],"sourcesContent":["export const userAgent: string =\n  window?.navigator?.userAgent?.toLocaleLowerCase();\n","import { userAgent } from './user-agent';\n\nexport const isAndroid: boolean = userAgent?.indexOf('android') !== -1;\n","import { TabBar } from 'src/types';\n\n// 全局作用域扩展 Window 声明\ndeclare global {\n  interface Window {\n    [MA_GLOBAL_KEY]: typeof globalConfig;\n    simulatorWebkit: any;\n    __simulatorConfig__: any;\n  }\n}\n\nexport const CURRENT_ROUTE = Symbol(`currentRoute`);\nexport const IS_INITD = Symbol(`isInitd`);\nexport const TABBAR = Symbol(`tabBar`);\nexport const CAN_NAVIGATE_TO = Symbol(`canNavigateTo`);\n\n// 为了调试方便, 这里使用字符串常量 而不是 symbol 变量\n// TODO: 后期增加 __DEV__ 能力之后, 生产态使用 Symbol\nconst MA_GLOBAL_KEY = `__ma__global__`;\n\ntype GLOBAL_CONFIG_VAL = string | boolean | TabBar | null;\n\nconst globalConfig: Record<symbol, GLOBAL_CONFIG_VAL> = {\n  [CURRENT_ROUTE]: ``,\n  [IS_INITD]: false,\n  [TABBAR]: null,\n  [CAN_NAVIGATE_TO]: true\n};\n\n/**\n * 将变量和值挂到 window 上方便共享\n * 统一挂到 window.__ma__global__对象下, 相同的 key 会被覆盖\n */\nwindow[MA_GLOBAL_KEY] = globalConfig;\n\nexport function makeGlobal(key: symbol, val: GLOBAL_CONFIG_VAL): void {\n  globalConfig[key] = val;\n}\n\nexport function getGlobal(key: symbol): GLOBAL_CONFIG_VAL {\n  return window[MA_GLOBAL_KEY][key];\n}\n","const MiniProgram = {\n  NAVIGATE_TO: 'navigateTo',\n  NAVIGATE_BACK: 'navigateBack',\n  REDIRECT_TO: 'redirectTo',\n  SWITCH_TAB: 'switchTab',\n  RE_LAUNCH: 'reLaunch',\n  POST_MESSAGE: 'postMessage',\n  CLOSE: 'close'\n};\n\nconst Native = {\n  CHOOSE_IMAGE: 'chooseImage',\n  GET_LOCAL_IMG_DATA: 'getLocalImgData',\n  GET_LOCATION: 'getLocation',\n  PREVIEW_IMAGE: 'previewImage',\n  OPEN_DOCUMENT: 'openDocument',\n  GET_STORAGE: 'getStorage',\n  SET_STORAGE: 'setStorage',\n  REMOVE_STORAGE: 'removeStorage',\n  CLEAR_STORAGE: 'clearStorage',\n  GET_NETWORK_TYPE: 'getNetworkType',\n  SCAN_CODE: 'scanCode'\n};\n\nexport const APINames = {\n  MiniProgram,\n  Native\n};\n","export const isWeb: boolean = window.parent.__simulatorConfig__ !== undefined;\n","import { isAndroid, isWeb } from 'src/shared';\nimport {\n  GeneralCallbackResult,\n  GeneralCallback,\n  GeneralInvokeOption,\n  IAnyStrObject,\n  InvokeFinishedCallback\n} from 'src/types';\n\nexport type IAnyNumObject = Record<number, any>;\n\nexport interface InvokeOption extends GeneralInvokeOption {}\n\nexport interface InvokeInnerFnsOption {\n  beforeAll: GeneralCallback;\n  beforeSuccess: GeneralCallback;\n  afterSuccess: GeneralCallback;\n  beforeFail: GeneralCallback;\n  afterFail: GeneralCallback;\n  afterAll: GeneralCallback;\n}\n\n// invoke callbacks\nconst callbacks: IAnyNumObject = {};\nlet callbackIndex: number = 0;\n\nfunction invokeHandler(\n  command: string,\n  inputParams: string,\n  callbackId: number\n) {\n  if (isWeb) {\n    window.simulatorWebkit.messageHandlers.invoke.postMessage({\n      command,\n      inputParams,\n      callbackId,\n      type: 'legacy'\n    });\n  } else if (isAndroid) {\n    window.viewLayerNative.invoke(command, inputParams, callbackId);\n  } else {\n    window.webkit.messageHandlers.invoke.postMessage({\n      command,\n      inputParams,\n      callbackId\n    });\n  }\n}\n\nexport function invoke(\n  command: string,\n  inputParams: IAnyStrObject = {},\n  callback: InvokeFinishedCallback\n) {\n  const paramsString = JSON.stringify(inputParams);\n  const callbackId = ++callbackIndex;\n  callbacks[callbackId] = callback;\n  invokeHandler(command, paramsString, callbackId);\n}\n\n/**\n * 统一封装调用逻辑, 通知 Native, 调用 API\n */\nexport function invokeMethod(\n  apiName: string,\n  opts?: Partial<InvokeOption & IAnyStrObject>,\n  innerCb: Partial<InvokeInnerFnsOption> = {}\n) {\n  const invokeCbFnsObj: Record<string, GeneralCallback> = {};\n\n  for (const name in opts) {\n    if (typeof opts[name] === 'function') {\n      invokeCbFnsObj[name] = opts[name];\n      delete opts[name];\n    }\n  }\n\n  invoke(apiName, opts, (invokeStatusCode, res) => {\n    const isOk = Number(invokeStatusCode) === 0;\n    const isFail = !isOk;\n\n    if (isOk) {\n      innerCb?.beforeAll?.(res);\n      innerCb?.beforeSuccess?.(res);\n      invokeCbFnsObj.success?.(res);\n      innerCb?.afterSuccess?.(res);\n    }\n\n    if (isFail) {\n      innerCb?.beforeFail?.(res);\n      invokeCbFnsObj.fail?.(res);\n      innerCb?.afterFail?.(res);\n    }\n\n    invokeCbFnsObj.complete?.(res);\n    innerCb?.afterAll?.(res);\n  });\n}\n\n/**\n * Native notify Web Page invoke result\n *\n * => viewLayer.onInvokeFinished\n */\nexport function onInvokeFinished(\n  callbackId: number,\n  invokeStatusCode: number,\n  outputParams: GeneralCallbackResult\n) {\n  const callback = callbacks[callbackId];\n  callback(invokeStatusCode, outputParams);\n  delete callbacks[callbackId];\n}\n\nconst MacleJSBridge = {\n  invoke,\n  invokeMethod\n};\n\nexport default MacleJSBridge;\n","import { isAndroid, isWeb } from 'src/shared';\nimport { IAnyStrObject, IFunStrObject } from 'src/types';\n\n// subscribe handlers\nconst handlers: IFunStrObject = {};\nconst eventPrefix = 'ma_custom_event_';\n\n/**\n * subscribe web event(user)\n */\nexport function webSubscribe(eventName: string, handler: Function) {\n  handlers[eventName] = handler;\n}\n\n/**\n * subscribe custom event\n */\nexport function subscribe(eventName: string, handler: Function) {\n  handlers[`${eventPrefix}${eventName}`] = handler;\n}\n\n/**\n * trigger event handler\n */\nexport function subscribeHandler(eventName: string, data: IAnyStrObject) {\n  const handler = handlers[eventName];\n  return handler(data);\n}\n\nexport function publish(eventName: string, params: IAnyStrObject = {}) {\n  const paramsString = JSON.stringify(params);\n  publishHandler(`${eventPrefix}${eventName}`, paramsString);\n}\n\nexport function webPublish(eventName: string, params: IAnyStrObject = {}) {\n  const paramsString = JSON.stringify(params);\n  publishHandler(eventName, paramsString);\n}\n\n/**\n * 通知 Native, 处理业务事件\n */\nfunction publishHandler(eventName: string, paramsString: string) {\n  if (isWeb) {\n    window.simulatorWebkit.messageHandlers.notifyNative.postMessage({\n      eventName,\n      paramsString,\n      type: 'legacy'\n    });\n  } else if (isAndroid) {\n    window.viewLayerNative.notifyNative(eventName, paramsString);\n  } else {\n    window.webkit.messageHandlers.notifyNative.postMessage({\n      eventName,\n      paramsString\n    });\n  }\n}\n","import { invoke, invokeMethod } from './invoke';\nimport { subscribe, webSubscribe, publish, webPublish } from './eventbus';\n\nconst MacleJSBridge = {\n  invoke,\n  invokeMethod,\n  subscribe,\n  webSubscribe,\n  publish,\n  webPublish\n};\n\nexport default MacleJSBridge;\n\nexport * from './invoke';\nexport * from './eventbus';\n","import {\n  CAN_NAVIGATE_TO,\n  CURRENT_ROUTE,\n  CUSTOM_EVENT,\n  getGlobal,\n  IS_INITD,\n  makeGlobal,\n  TABBAR\n} from 'src/shared';\nimport { subscribe, publish } from './bridges';\nimport { IAnyStrObject } from 'src/types';\n\nexport function init() {\n  // already initd\n  if (getGlobal(IS_INITD) as boolean) {\n    return;\n  }\n\n  makeGlobal(IS_INITD, true);\n\n  try {\n    subscribe(CUSTOM_EVENT.GET_CURRENT_ROUTE, (data: IAnyStrObject) => {\n      makeGlobal(CURRENT_ROUTE, data.route);\n      makeGlobal(TABBAR, data.tabBar);\n      makeGlobal(\n        CAN_NAVIGATE_TO,\n        data.canNavigateTo !== undefined ? data.canNavigateTo : true\n      );\n    });\n\n    publish(CUSTOM_EVENT.GET_CURRENT_ROUTE);\n  } catch (error) {}\n}\n","type GetEnvCallback = (ret: { miniprogram: boolean }) => void;\n\nexport function getEnv(callback: GetEnvCallback): void {\n  const miniprogram = window.__ma_environment === 'miniprogram';\n  callback({\n    miniprogram\n  });\n}\n","import { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\nimport MacleJSBridge from 'src/bridges';\n\nexport interface NavigateBackOption extends Partial<GeneralInvokeOption> {\n  delta: number;\n}\n\n/**\n * ```js\n *   ma.miniProgram.navigateTo({\n *     delta: 1,\n *     success: function(res) {},\n *     fail: function(res) {},\n *     complete: function(res) {},\n *   })\n * ```\n */\nexport function navigateBack(option: NavigateBackOption): void {\n  const fixedOption = Object.assign({ delta: 1 }, option);\n  MacleJSBridge.invokeMethod(APINames.MiniProgram.NAVIGATE_BACK, fixedOption);\n}\n","import { APINames, getGlobal, TABBAR } from 'src/shared';\nimport { IAnyStrObject, TabBar } from 'src/types';\nimport {\n  NavigateToOption,\n  RedirectToOption,\n  SwitchTabOption,\n  ReLaunchOption\n} from './miniprogram';\n\n/**\n * fix route\n * @param currentRoute 当前路由\n * @param toUrl 目标 url\n */\nexport function getRealRoute(\n  currentRoute: string,\n  toUrl: string,\n  isHtml: boolean = true\n): string {\n  let fixedUrl = toUrl;\n\n  if (isHtml) {\n    fixedUrl = addHTMLSuffix(fixedUrl);\n  }\n\n  if (fixedUrl.startsWith('/')) {\n    return fixedUrl.substr('/'.length);\n  }\n\n  if (fixedUrl.startsWith('./')) {\n    return getRealRoute(currentRoute, fixedUrl.substr('./'.length), false);\n  }\n\n  // 移除 url 前面的 ../ 并记录其位置\n  let index;\n  let urlArrLength;\n  const urlArr = fixedUrl.split('/');\n  for (\n    index = 0, urlArrLength = urlArr.length;\n    index < urlArrLength && urlArr[index] === '..';\n    index++\n  );\n  urlArr.splice(0, index);\n  const pathArr = currentRoute.length > 0 ? currentRoute.split('/') : [];\n  pathArr.splice(pathArr.length - index - 1, index + 1);\n  return pathArr.concat(urlArr).join('/');\n}\n\nexport function encodeUrlQuery(url: string): string {\n  const urlArr = url.split('?');\n  const [urlPath, queryUrl] = urlArr;\n  if (!queryUrl) {\n    return url;\n  }\n  const queryParams = queryUrl.split('&').reduce((res: IAnyStrObject, cur) => {\n    if (typeof cur === 'string' && cur.length > 0) {\n      const curArr = cur.split('=');\n      const key = curArr[0];\n      const value = curArr[1];\n      res[key] = value;\n    }\n    return res;\n  }, Object.create(null));\n  const urlQueryArr = [];\n  for (const i in queryParams) {\n    urlQueryArr.push(i + '=' + encodeURIComponent(queryParams[i]));\n  }\n  return urlQueryArr.length > 0 ? urlPath + '?' + urlQueryArr.join('&') : url;\n}\n\nexport function addHTMLSuffix(url: string): string {\n  const urlArr = url.split('?');\n  urlArr[0] += '.html';\n  return urlArr[1] === undefined ? urlArr[0] : `${urlArr[0]}?${urlArr[1]}`;\n}\n\nexport function checkUrl(\n  apiName: string,\n  options:\n    | NavigateToOption\n    | RedirectToOption\n    | SwitchTabOption\n    | ReLaunchOption\n): boolean {\n  const tabBar = getGlobal(TABBAR) as TabBar | null;\n  if (tabBar === null) {\n    return true;\n  }\n\n  if (options.url.startsWith('/')) {\n    options.url = options.url.slice('/'.length);\n  }\n\n  // 目标 url 是否在 tabbar 中\n  const inTabBar = ((url: string) =>\n    tabBar?.list.find(e => url.indexOf(e.pagePath) === 0))(options.url);\n\n  // navigateTo 和 redirectTo API 禁止跳转到 tabbar 页面\n  if (\n    apiName === APINames.MiniProgram.NAVIGATE_TO ||\n    apiName === APINames.MiniProgram.REDIRECT_TO\n  ) {\n    if (inTabBar) {\n      console.error(\n        apiName,\n        options,\n        `${apiName}: can not ${apiName} to a tabbar page`\n      );\n      return false;\n    }\n  }\n\n  // switchTab 禁止跳转到非 tabbar 页面\n  if (apiName === APINames.MiniProgram.SWITCH_TAB) {\n    if (!inTabBar) {\n      console.error(\n        apiName,\n        options,\n        `${apiName}: can not ${apiName} to a non-tabbar page`\n      );\n      return false;\n    }\n  }\n  return true;\n}\n","import { APINames, CURRENT_ROUTE, getGlobal } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\nimport { getRealRoute, encodeUrlQuery, checkUrl } from '../utils';\nimport MacleJSBridge from 'src/bridges';\n\nexport interface NavigateToOption extends Partial<GeneralInvokeOption> {\n  url: string;\n}\n\n/**\n * ```js\n *   ma.miniProgram.navigateTo({\n *     url: 'example?id=1',\n *     success: function(res) {},\n *     fail: function(res) {},\n *     complete: function(res) {},\n *   })\n * ```\n */\nexport function navigateTo(option: NavigateToOption): void {\n  if (!option.url) {\n    console.error(\n      'navigateTo fail,parameter error:parameter.url should be String instead of Undefined.'\n    );\n    return;\n  }\n  const fixedOption = option;\n  fixedOption.url = getRealRoute(\n    getGlobal(CURRENT_ROUTE) as string,\n    fixedOption.url\n  );\n  fixedOption.url = encodeUrlQuery(fixedOption.url);\n\n  if (checkUrl(APINames.MiniProgram.NAVIGATE_TO, fixedOption)) {\n    MacleJSBridge.invokeMethod(APINames.MiniProgram.NAVIGATE_TO, fixedOption);\n  }\n}\n","import { GeneralInvokeOption } from 'src/types';\nimport { getRealRoute, encodeUrlQuery, checkUrl } from '../utils';\nimport MacleJSBridge from 'src/bridges';\nimport { APINames, CURRENT_ROUTE, getGlobal } from 'src/shared';\n\nexport interface RedirectToOption extends Partial<GeneralInvokeOption> {\n  url: string;\n}\n\n/**\n * ```js\n *   ma.miniProgram.redirectTo({\n *     url: 'example?id=1',\n *     success: function(res) {},\n *     fail: function(res) {},\n *     complete: function(res) {},\n *   })\n * ```\n */\nexport function redirectTo(option: RedirectToOption): void {\n  if (!option.url) {\n    console.error(\n      'redirectTo fail,parameter error:parameter.url should be String instead of Undefined.'\n    );\n    return;\n  }\n  const fixedOption = option;\n  fixedOption.url = getRealRoute(\n    getGlobal(CURRENT_ROUTE) as string,\n    fixedOption.url\n  );\n  fixedOption.url = encodeUrlQuery(fixedOption.url);\n\n  if (checkUrl(APINames.MiniProgram.REDIRECT_TO, fixedOption)) {\n    MacleJSBridge.invokeMethod(APINames.MiniProgram.REDIRECT_TO, fixedOption);\n  }\n}\n","import { GeneralInvokeOption } from 'src/types';\nimport { getRealRoute, encodeUrlQuery, checkUrl } from '../utils';\nimport MacleJSBridge from 'src/bridges';\nimport { APINames, CURRENT_ROUTE, getGlobal } from 'src/shared';\n\nexport interface SwitchTabOption extends Partial<GeneralInvokeOption> {\n  url: string;\n}\n\n/**\n * ```js\n *   ma.miniProgram.switchTab({\n *     url: '/example',\n *     success: function(res) {},\n *     fail: function(res) {},\n *     complete: function(res) {},\n *   })\n * ```\n */\nexport function switchTab(option: SwitchTabOption): void {\n  if (!option.url) {\n    console.error(\n      'switchTab fail,parameter error:parameter.url should be String instead of Undefined.'\n    );\n    return;\n  }\n  const fixedOption = option;\n  fixedOption.url = getRealRoute(\n    getGlobal(CURRENT_ROUTE) as string,\n    fixedOption.url\n  );\n  fixedOption.url = encodeUrlQuery(fixedOption.url);\n\n  if (checkUrl(APINames.MiniProgram.SWITCH_TAB, fixedOption)) {\n    MacleJSBridge.invokeMethod(APINames.MiniProgram.SWITCH_TAB, fixedOption);\n  }\n}\n","import { GeneralInvokeOption } from 'src/types';\nimport { getRealRoute, encodeUrlQuery, checkUrl } from '../utils';\nimport MacleJSBridge from 'src/bridges';\nimport { APINames, CURRENT_ROUTE, getGlobal } from 'src/shared';\n\nexport interface ReLaunchOption extends Partial<GeneralInvokeOption> {\n  url: string;\n}\n\n/**\n * ```js\n *   ma.miniProgram.reLaunch({\n *     url: '/example',\n *     success: function(res) {},\n *     fail: function(res) {},\n *     complete: function(res) {},\n *   })\n * ```\n */\nexport function reLaunch(option: ReLaunchOption): void {\n  if (!option.url) {\n    console.error(\n      'reLaunch fail,parameter error:parameter.url should be String instead of Undefined.'\n    );\n    return;\n  }\n  const fixedOption = option;\n  fixedOption.url = getRealRoute(\n    getGlobal(CURRENT_ROUTE) as string,\n    fixedOption.url\n  );\n  fixedOption.url = encodeUrlQuery(fixedOption.url);\n\n  if (checkUrl(APINames.MiniProgram.RE_LAUNCH, fixedOption)) {\n    MacleJSBridge.invokeMethod(APINames.MiniProgram.RE_LAUNCH, fixedOption);\n  }\n}\n","import { APINames } from 'src/shared';\nimport { GeneralInvokeOption, IAnyStrObject } from 'src/types';\nimport MacleJSBridge from 'src/bridges';\n\nexport interface PostMessageOption extends Partial<GeneralInvokeOption> {\n  data: string | IAnyStrObject;\n}\n\n/**\n * 向小程序发送消息，会在特定时机（小程序后退、组件销毁）触发组件的 message 事件\n * 需要通过 bindmessage 接收\n *\n * ```js\n *   ma.miniProgram.postMessage({\n *     data: 'foo' | { foo: 'bar' },\n *     success: function(res) {},\n *     fail: function(res) {},\n *     complete: function(res) {},\n *   })\n * ```\n */\nexport function postMessage(option: PostMessageOption) {\n  MacleJSBridge.invokeMethod(APINames.MiniProgram.POST_MESSAGE, option);\n}\n","import { APINames } from 'src/shared';\nimport MacleJSBridge from 'src/bridges';\n\n/**\n * 关闭小程序\n *\n * ```js\n *   ma.miniProgram.close()\n * ```\n */\nexport function close() {\n  MacleJSBridge.invokeMethod(APINames.MiniProgram.CLOSE);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\nexport interface ChooseImageOption extends Partial<GeneralInvokeOption> {\n  count: number;\n  sizeType: Array<String>;\n  sourceType: Array<String>;\n}\n\n// 拍照或上传\nexport function chooseImage(option?: ChooseImageOption) {\n  const fixedOption = Object.assign(\n    {\n      count: 9,\n      sizeType: ['original', 'compressed'],\n      sourceType: ['album', 'camera']\n    },\n    option\n  );\n  MacleJSBridge.invokeMethod(APINames.Native.CHOOSE_IMAGE, fixedOption);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\n/**\n * ```js\n *   ma.getLocation({\n *     success(res) {},\n *     fail(res) {},\n *     complete(res) {},\n *   })\n * ```\n */\n\n// 获取当前地理位置信息\nexport function getLocation(option?: GeneralInvokeOption) {\n  MacleJSBridge.invokeMethod(APINames.Native.GET_LOCATION, option);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\nexport interface PreviewImageOption extends Partial<GeneralInvokeOption> {\n  urls: Array<string>;\n  current: string;\n}\n\n/**\n * js\n * ma.previewImage({\n  urls: [],\n  current: '',\n  success() {},\n  fail() {},\n  complete() {}\n});\n*/\n\n// 预览图片\nexport function previewImage(option?: PreviewImageOption) {\n  if (!option?.urls) {\n    console.error(\n      'previewImage fail,parameter error:parameter.urls should be Array instead of Undefined.'\n    );\n    return;\n  }\n  MacleJSBridge.invokeMethod(APINames.Native.PREVIEW_IMAGE, option);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\nexport interface OpenDocumentOption extends Partial<GeneralInvokeOption> {\n  filePath: string;\n  fileType: string;\n}\n\n// 打开文件，预览文件\nexport function openDocument(option?: OpenDocumentOption) {\n  if (!option?.filePath) {\n    console.error(\n      'openDocument fail,parameter error:parameters.filePath should be String instead of Undefined.'\n    );\n    return;\n  }\n  const validFileType: Array<string> = [\n    'doc',\n    'docx',\n    'xls',\n    'xlsx',\n    'ppt',\n    'pptx',\n    'pdf'\n  ];\n  if (option.fileType && validFileType.indexOf(option.fileType) === -1) {\n    console.error(\n      'openDocument fail,parameter error:parameter.fileType is invalid value.'\n    );\n    return;\n  }\n  MacleJSBridge.invokeMethod(APINames.Native.OPEN_DOCUMENT, option);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\nexport interface GetStorageOption extends Partial<GeneralInvokeOption> {\n  key: string;\n}\n\n// 从本地缓存中获取指定key的内容\nexport function getStorage(option?: GetStorageOption) {\n  if (!option?.key) {\n    console.error(\n      'getStorage fail,parameter error:parameters.key should be String instead of Undefined.'\n    );\n    return;\n  }\n  MacleJSBridge.invokeMethod(APINames.Native.GET_STORAGE, option);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\nexport interface SetStorageOption extends Partial<GeneralInvokeOption> {\n  key: string;\n  data: any;\n}\n\n// 将数据存储在本地缓存指定key中\nexport function setStorage(option?: SetStorageOption) {\n  if (!option?.key || !option.data) {\n    console.error(\n      'setStorage fail,parameter error:parameter.key or parameter.data should not be Undefined.'\n    );\n    return;\n  }\n  MacleJSBridge.invokeMethod(APINames.Native.SET_STORAGE, option);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\nexport interface RemoveStorageOption extends Partial<GeneralInvokeOption> {\n  key: string;\n}\n\n// 从本地缓存中移除指定key\nexport function removeStorage(option?: RemoveStorageOption) {\n  if (!option?.key) {\n    console.error(\n      'removeStorage fail,parameter error:parameter.key should be String instead of Undefined.'\n    );\n    return;\n  }\n  MacleJSBridge.invokeMethod(APINames.Native.REMOVE_STORAGE, option);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\n// 清理本地数据缓存\nexport function clearStorage(option?: GeneralInvokeOption) {\n  MacleJSBridge.invokeMethod(APINames.Native.CLEAR_STORAGE, option);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\n// 获取网络类型\nexport function getNetworkType(option?: GeneralInvokeOption) {\n  MacleJSBridge.invokeMethod(APINames.Native.GET_NETWORK_TYPE, option);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\nexport interface ScanCodeOption extends Partial<GeneralInvokeOption> {\n  onlyFromCamera: boolean;\n  scanType: Array<string>;\n}\n\n// 扫描二维码\nexport function scanCode(option?: ScanCodeOption) {\n  // 校验scanType合法性\n  const validScanType: Array<string> = [\n    'barCode',\n    'qrCode',\n    'datamatrix',\n    'pdf417'\n  ];\n  if (option?.scanType && option.scanType.length > 0) {\n    if (!option.scanType.every(item => validScanType.indexOf(item) > -1)) {\n      console.error(\n        'scanCode fail,parameter error:parameter.scanType contains invalid values.'\n      );\n      return;\n    }\n  }\n  const fixedOption = Object.assign(\n    {\n      onlyFromCamera: false,\n      scanType: ['barCode', 'qrCode']\n    },\n    option\n  );\n  MacleJSBridge.invokeMethod(APINames.Native.SCAN_CODE, fixedOption);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { APINames } from 'src/shared';\nimport { GeneralInvokeOption } from 'src/types';\n\nexport interface GetLocalImgDataOption extends Partial<GeneralInvokeOption> {\n  path: string;\n}\n\n// 获取本地base64图片\nexport function getLocalImgData(option?: GetLocalImgDataOption) {\n  if (!option?.path) {\n    console.error(\n      'getLocalImgData fail,parameter error:parameter.path should be String instead of Undefined.'\n    );\n    return;\n  }\n  MacleJSBridge.invokeMethod(APINames.Native.GET_LOCAL_IMG_DATA, option);\n}\n","import MacleJSBridge from 'src/bridges';\nimport { IAnyStrObject } from 'src/types';\n\nexport type NativeCallback = (res: any) => any;\n\n// h5调用native原生方法\nexport function callNativeAPI(\n  apiName: string,\n  inputParams: IAnyStrObject = {},\n  callback: NativeCallback\n) {\n  if (!callback || typeof callback !== 'function') {\n    console.error('callNativeAPI failed, callback should be function!');\n    return;\n  }\n  MacleJSBridge.invoke(apiName, inputParams, (invokeStatusCode, res) => {\n    const isOk = Number(invokeStatusCode) === 0;\n    if (!isOk) {\n      console.error(`callNativeAPI failed, ${res.errMsg}`);\n      return;\n    }\n    callback(res);\n  });\n}\n","import { callNativeAPI } from './call-native-api';\nimport { IAnyStrObject } from 'src/types';\nexport function native(method: string, param?: IAnyStrObject) {\n  const finalParam = param || {};\n  return new Promise(resolve => {\n    callNativeAPI(method, finalParam, res => {\n      resolve(res);\n    });\n  });\n}\n","import {\n  getEnv,\n  navigateBack,\n  navigateTo,\n  redirectTo,\n  switchTab,\n  reLaunch,\n  postMessage,\n  close\n} from './miniprogram';\n\nimport {\n  chooseImage,\n  getLocation,\n  previewImage,\n  openDocument,\n  getStorage,\n  setStorage,\n  removeStorage,\n  clearStorage,\n  getNetworkType,\n  scanCode,\n  getLocalImgData,\n  callNativeAPI,\n  native\n} from './native';\n\nconst APIS = {\n  // miniapp\n  miniProgram: {\n    getEnv,\n    navigateTo,\n    navigateBack,\n    switchTab,\n    reLaunch,\n    redirectTo,\n    postMessage,\n    close,\n    navigateToMiniProgram() {},\n    navigateBackMiniProgram() {},\n    onWebviewEvent() {},\n    offWebviewEvent() {},\n    sendWebviewEvent() {},\n    onShow() {},\n    onHide() {},\n    onUnload() {}\n  },\n\n  // H5 invoke Native\n  chooseImage,\n  getLocation,\n  previewImage,\n  openDocument,\n  getStorage,\n  setStorage,\n  removeStorage,\n  clearStorage,\n  getNetworkType,\n  scanCode,\n  getLocalImgData,\n  callNativeAPI,\n  native\n};\n\nexport default APIS;\n","import { init } from './init';\nimport { onInvokeFinished } from './bridges';\nimport { subscribeHandler } from './bridges';\nimport APIS from './apis';\n\n// 执行初始化逻辑\ndocument.readyState !== 'loading'\n  ? init()\n  : document.addEventListener('DOMContentLoaded', init);\n\n/**\n * Support use ma.api from window\n */\nwindow.ma = APIS;\n\nwindow.viewLayer = {\n  onInvokeFinished,\n  subscribeHandler\n};\n\nexport default APIS;\n"],"names":[],"mappings":"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"}